(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[388],{1775:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(7653);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=(...e)=>e.filter((e,t,n)=>!!e&&n.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:i,iconNode:c,...d},m)=>(0,a.createElement)("svg",{ref:m,...l,width:t,height:t,stroke:e,strokeWidth:s?24*Number(n)/Number(t):n,className:r("lucide",o),...d},[...c.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(i)?i:[i]])),i=((e,t)=>{let n=(0,a.forwardRef)(({className:n,...l},i)=>(0,a.createElement)(o,{ref:i,iconNode:t,className:r(`lucide-${s(e)}`,n),...l}));return n.displayName=`${e}`,n})("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},9043:function(e,t,n){Promise.resolve().then(n.bind(n,3008))},3008:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n(7573),s=n(7653),r=n(2056),l=n.n(r),o=n(1775),i=n(9811),c=n(3613);function d(){var e;let[t,n]=(0,s.useState)(null),[r,d]=(0,s.useState)(!1),[m,x]=(0,s.useState)(null),[h,u]=(0,s.useState)(!1),[g,f]=(0,s.useState)(""),[N,b]=(0,s.useState)(""),[p,v]=(0,s.useState)(""),[j,w]=(0,s.useState)(!1),[y,k]=(0,s.useState)(""),[S,C]=(0,s.useState)(""),[E,I]=(0,s.useState)(!1),O=()=>{let e={mockMode:j};if(g.trim()&&(e.sprintId=g.trim()),N.trim()&&(e.sprintName=N.trim()),p.trim()&&(e.boardId=p.trim()),y.trim())try{let t=JSON.parse(y);e.extra=t,C("")}catch(e){return C("Parse error: invalid JSON"),null}return e},A=async()=>{let e=O();if(e){d(!0),x(null);try{let t=await (0,i.j)("collect",e);n(t)}catch(t){let e=t instanceof Error?t.message:"Unknown error occurred";x(e),console.error("Collect step failed:",t)}finally{d(!1)}}},R=null==t?void 0:t.result;return(0,a.jsx)("div",{className:"min-h-screen bg-black p-4 md:p-8",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8 border-b border-green-500 pb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(l(),{href:"/",className:"text-green-500 font-mono text-sm hover:text-green-300 transition-colors",children:"[HOME]"}),(0,a.jsx)("span",{className:"text-green-500/50",children:"/"}),(0,a.jsx)("span",{className:"text-green-500 font-mono text-sm",children:"Stage 1"})]}),(0,a.jsx)(c.U,{level:1,className:"mb-2",children:"[STAGE 1] Сбор данных и валидация"}),(0,a.jsx)("p",{className:"text-green-500 font-mono text-sm opacity-80",children:"Сбор данных из Jira и оценка качества/полноты информации"})]}),m&&(0,a.jsx)("div",{className:"mb-6 border border-red-500 bg-black p-4",children:(0,a.jsxs)("div",{className:"text-red-500 font-mono text-sm",children:["[ERROR] ",m]})}),(0,a.jsxs)(c.jB,{className:"mb-8",children:[(0,a.jsx)(c.U,{level:2,className:"mb-4",children:"[ ПАРАМЕТРЫ ]"}),(0,a.jsx)(c.tS,{}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsx)(c.xj,{label:"Sprint ID:",value:g,onChange:f,disabled:r,placeholder:"e.g., 12345"}),(0,a.jsx)(c.xj,{label:"Sprint Name:",value:N,onChange:b,disabled:r,placeholder:"e.g., Sprint 42"}),(0,a.jsx)(c.xj,{label:"Board ID:",value:p,onChange:v,disabled:r,placeholder:"e.g., board-123"}),(0,a.jsx)(c.fm,{label:"MOCK_MODE",checked:j,onChange:w,disabled:r}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{onClick:()=>I(!E),disabled:r,className:"flex items-center text-green-500 font-mono text-sm hover:text-green-300 transition-colors disabled:opacity-50",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-1 transition-transform ".concat(E?"rotate-90":"")}),"Extra JSON params"]}),E&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(c.xj,{label:"",value:y,onChange:k,disabled:r,placeholder:'{"key": "value"}',type:"textarea"}),S&&(0,a.jsx)("div",{className:"text-red-500 font-mono text-xs mt-1",children:S})]})]})]}),r&&(0,a.jsx)("div",{className:"mb-4 text-green-500 font-mono text-sm animate-pulse",children:"[ RUNNING STEP 1... ]"}),(0,a.jsx)(c.RD,{onClick:A,disabled:r,children:"[RUN] Collect & Validate Data"})]}),(0,a.jsxs)(c.jB,{children:[(0,a.jsx)(c.U,{level:2,className:"mb-4",children:"[ РЕЗУЛЬТАТЫ ]"}),t?(0,a.jsxs)("div",{className:"space-y-6",children:[(null==R?void 0:R.sprint)&&(0,a.jsxs)("div",{className:"border border-green-500/50 p-4",children:[(0,a.jsx)("div",{className:"text-green-400 font-mono text-sm mb-2",children:"SPRINT INFO:"}),R.sprint.name&&(0,a.jsxs)("div",{className:"font-mono text-sm text-green-500",children:["SPRINT: ",R.sprint.name]}),R.sprint.id&&(0,a.jsxs)("div",{className:"font-mono text-sm text-green-500",children:["ID: ",R.sprint.id]}),(R.sprint.startDate||R.sprint.endDate)&&(0,a.jsxs)("div",{className:"font-mono text-sm text-green-500",children:["DATES: ",R.sprint.startDate||"?"," -"," ",R.sprint.endDate||"?"]}),R.sprint.goal&&(0,a.jsxs)("div",{className:"font-mono text-sm text-green-500",children:["GOAL: ",R.sprint.goal]})]}),(null==R?void 0:R.dataValidation)&&(0,a.jsxs)("div",{className:"border border-green-500/50 p-4",children:[(0,a.jsx)("div",{className:"text-green-400 font-mono text-sm mb-2",children:"DATA VALIDATION:"}),(0,a.jsxs)("div",{className:"font-mono text-sm mb-2",children:[(0,a.jsx)("span",{className:"text-green-500",children:"DATA_VALID: "}),(0,a.jsx)("span",{className:R.dataValidation.isValid?"text-green-400":"text-red-500",children:R.dataValidation.isValid?"YES":"NO"})]}),R.dataValidation.goalIssueMatchLevel&&(0,a.jsxs)("div",{className:"font-mono text-sm mb-2",children:[(0,a.jsx)("span",{className:"text-green-500",children:"GOAL_MATCH: "}),(0,a.jsx)("span",{className:"strong"===R.dataValidation.goalIssueMatchLevel?"text-green-400":"medium"===R.dataValidation.goalIssueMatchLevel?"text-yellow-500":"text-red-500",children:R.dataValidation.goalIssueMatchLevel})]}),R.dataValidation.goalIssueMatchComment&&(0,a.jsx)("div",{className:"font-mono text-sm mb-2 text-green-500/80 whitespace-pre-wrap",children:R.dataValidation.goalIssueMatchComment}),R.dataValidation.errors.length>0&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("div",{className:"text-red-500 font-mono text-sm mb-1",children:"ERRORS:"}),R.dataValidation.errors.map((e,t)=>(0,a.jsxs)("div",{className:"text-red-500 font-mono text-sm",children:["[ERROR] (",e.code||"no-code",") ",e.message,e.details&&" - ".concat(e.details)]},t))]}),R.dataValidation.warnings.length>0&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("div",{className:"text-yellow-500 font-mono text-sm mb-1",children:"WARNINGS:"}),R.dataValidation.warnings.map((e,t)=>(0,a.jsxs)("div",{className:"text-yellow-500 font-mono text-sm",children:["[WARN] (",e.code||"no-code",") ",e.message,e.details&&" - ".concat(e.details)]},t))]})]}),!(null==R?void 0:R.sprint)&&!(null==R?void 0:R.dataValidation)&&(0,a.jsx)("div",{className:"font-mono text-sm text-gray-500",children:"[ No data available ]"})]}):(0,a.jsx)("div",{className:"text-green-500 font-mono text-sm",children:"[ NO RESULTS YET ]"}),(0,a.jsxs)("div",{className:"mt-6 pt-4 border-t border-green-500/30",children:[(0,a.jsx)("button",{onClick:()=>u(!h),className:"text-green-500 font-mono text-sm hover:text-green-300 transition-colors",children:"[Toggle Raw JSON]"}),h&&t&&(0,a.jsx)("div",{className:"mt-4 border border-green-500/50 p-4 overflow-auto max-h-96",children:(0,a.jsx)("pre",{className:"font-mono text-xs text-green-500",children:JSON.stringify(t,null,2)})})]})]}),(null==R?void 0:null===(e=R.dataValidation)||void 0===e?void 0:e.isValid)&&(0,a.jsx)("div",{className:"mt-8 text-center",children:(0,a.jsx)(l(),{href:"/stage-2",className:"inline-block border border-green-500 text-green-500 px-6 py-3 font-mono hover:bg-green-500 hover:text-black transition-colors",children:"[NEXT] Перейти к Stage 2 — Генерация отчёта →"})})]})})}},3613:function(e,t,n){"use strict";n.d(t,{tS:function(){return m},RD:function(){return l},fm:function(){return i},U:function(){return r},xj:function(){return o},jB:function(){return s}});var a=n(7573);function s(e){let{children:t,className:n=""}=e;return(0,a.jsx)("div",{className:"border border-green-500 p-6 bg-black shadow-[0_0_10px_rgba(0,255,0,0.3)] ".concat(n),children:t})}function r(e){let{children:t,level:n=2,className:s=""}=e,r="h".concat(n);return(0,a.jsx)(r,{className:"".concat("text-green-500 font-mono"," ").concat({1:"text-2xl md:text-3xl",2:"text-xl",3:"text-lg"}[n]," ").concat(s),children:t})}function l(e){let{children:t,onClick:n,disabled:s=!1,variant:r="primary",className:l="",type:o="button"}=e;return(0,a.jsx)("button",{type:o,onClick:n,disabled:s,className:"".concat("border border-green-500 px-4 py-3 font-mono transition-colors disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"text-green-500 hover:bg-green-500 hover:text-black",secondary:"text-green-500/70 hover:bg-green-500/20 hover:text-green-400"}[r]," ").concat(l),children:t})}function o(e){let{label:t,value:n,onChange:s,disabled:r=!1,placeholder:l="",type:o="text",className:i=""}=e,c="w-full bg-black border border-green-500 text-green-500 px-3 py-2 font-mono focus:outline-none focus:ring-1 focus:ring-green-500 disabled:opacity-50";return(0,a.jsxs)("div",{className:i,children:[(0,a.jsx)("label",{className:"block text-green-500 font-mono text-sm mb-1",children:t}),"textarea"===o?(0,a.jsx)("textarea",{value:n,onChange:e=>s(e.target.value),disabled:r,placeholder:l,className:"".concat(c," min-h-[100px] text-xs")}):(0,a.jsx)("input",{type:"text",value:n,onChange:e=>s(e.target.value),disabled:r,placeholder:l,className:c})]})}function i(e){let{label:t,checked:n,onChange:s,disabled:r=!1,className:l=""}=e,o="checkbox-".concat(t.toLowerCase().replace(/\s+/g,"-"));return(0,a.jsxs)("div",{className:"flex items-center space-x-2 ".concat(l),children:[(0,a.jsx)("input",{type:"checkbox",id:o,checked:n,onChange:e=>s(e.target.checked),disabled:r,className:"w-4 h-4 bg-black border border-green-500 text-green-500 focus:ring-1 focus:ring-green-500 disabled:opacity-50"}),(0,a.jsx)("label",{htmlFor:o,className:"text-green-500 font-mono text-sm",children:t})]})}var c=n(7653),d=n(9811);function m(){let[e,t]=(0,c.useState)("checking");return(0,c.useEffect)(()=>{let e=async()=>{let e=await (0,d.q)();t(e?"online":"offline")};e();let n=setInterval(e,5e3);return()=>clearInterval(n)},[]),(0,a.jsxs)("div",{className:"text-green-500 font-mono text-sm mb-2",children:["checking"===e&&"[BACKEND: CHECKING...]","online"===e&&"[BACKEND: ONLINE]","offline"===e&&(0,a.jsx)("span",{className:"text-red-500",children:"[BACKEND: OFFLINE]"})]})}},9811:function(e,t,n){"use strict";n.d(t,{j:function(){return l},q:function(){return r}});var a=n(4850);let s=a.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:4000";async function r(){try{let e=await fetch("".concat(s,"/api/workflow/ping"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)return!1;let t=await e.json();return"ok"===t.status}catch(e){return console.error("Ping failed:",e),!1}}async function l(e,t){let n=await fetch("".concat(s,"/api/workflow/run-step"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({step:e,params:t})});if(!n.ok){let e=await n.text();throw Error("API request failed: ".concat(n.status," ").concat(n.statusText).concat(e?" - "+e:""))}return n.json()}}},function(e){e.O(0,[833,293,858,744],function(){return e(e.s=9043)}),_N_E=e.O()}]);