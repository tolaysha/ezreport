(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[765],{1775:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7653);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=(...e)=>e.filter((e,t,n)=>!!e&&n.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:l="",children:i,iconNode:c,...d},m)=>(0,r.createElement)("svg",{ref:m,...o,width:t,height:t,stroke:e,strokeWidth:s?24*Number(n)/Number(t):n,className:a("lucide",l),...d},[...c.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(i)?i:[i]])),i=((e,t)=>{let n=(0,r.forwardRef)(({className:n,...o},i)=>(0,r.createElement)(l,{ref:i,iconNode:t,className:a(`lucide-${s(e)}`,n),...o}));return n.displayName=`${e}`,n})("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},9892:function(e,t,n){Promise.resolve().then(n.bind(n,9621))},9621:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(7573),s=n(7653),a=n(2056),o=n.n(a),l=n(1775),i=n(9811),c=n(3613);function d(){var e,t,n,a;let[d,m]=(0,s.useState)(null),[x,u]=(0,s.useState)(!1),[h,p]=(0,s.useState)(null),[N,g]=(0,s.useState)(null),[f,v]=(0,s.useState)(!1),[b,j]=(0,s.useState)(""),[R,w]=(0,s.useState)(""),[y,k]=(0,s.useState)(""),[S,E]=(0,s.useState)(!1),[O,C]=(0,s.useState)(""),[A,I]=(0,s.useState)(""),[V,T]=(0,s.useState)(!1),L=()=>{let e={mockMode:S};if(b.trim()&&(e.sprintId=b.trim()),R.trim()&&(e.sprintName=R.trim()),y.trim()&&(e.boardId=y.trim()),O.trim())try{let t=JSON.parse(O);e.extra=t,I("")}catch(e){return I("Parse error: invalid JSON"),null}return e},P=async()=>{let e=L();if(e){u(!0),p("full"),g(null);try{let t=await (0,i.j)("full",e);m(t)}catch(t){let e=t instanceof Error?t.message:"Unknown error occurred";g(e),console.error("Full workflow failed:",t)}finally{u(!1),p(null)}}},D=async()=>{let e=L();if(e){u(!0),p("validate"),g(null);try{let t=await (0,i.j)("validate",e);m(t)}catch(t){let e=t instanceof Error?t.message:"Unknown error occurred";g(e),console.error("Validate step failed:",t)}finally{u(!1),p(null)}}},U=null==d?void 0:d.result;return(0,r.jsx)("div",{className:"min-h-screen bg-black p-4 md:p-8",children:(0,r.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8 border-b border-green-500 pb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(o(),{href:"/",className:"text-green-500 font-mono text-sm hover:text-green-300 transition-colors",children:"[HOME]"}),(0,r.jsx)("span",{className:"text-green-500/50",children:"/"}),(0,r.jsx)("span",{className:"text-green-500 font-mono text-sm",children:"Stage 3"})]}),(0,r.jsx)(c.U,{level:1,className:"mb-2",children:"[STAGE 3] Финальная валидация"}),(0,r.jsx)("p",{className:"text-green-500 font-mono text-sm opacity-80",children:"Проверка полного отчёта по правилам и готовность для партнёра"})]}),N&&(0,r.jsx)("div",{className:"mb-6 border border-red-500 bg-black p-4",children:(0,r.jsxs)("div",{className:"text-red-500 font-mono text-sm",children:["[ERROR] ",N]})}),(0,r.jsxs)(c.jB,{className:"mb-8",children:[(0,r.jsx)(c.U,{level:2,className:"mb-4",children:"[ ПАРАМЕТРЫ ]"}),(0,r.jsx)(c.tS,{}),(0,r.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,r.jsx)(c.xj,{label:"Sprint ID:",value:b,onChange:j,disabled:x,placeholder:"e.g., 12345"}),(0,r.jsx)(c.xj,{label:"Sprint Name:",value:R,onChange:w,disabled:x,placeholder:"e.g., Sprint 42"}),(0,r.jsx)(c.xj,{label:"Board ID:",value:y,onChange:k,disabled:x,placeholder:"e.g., board-123"}),(0,r.jsx)(c.fm,{label:"MOCK_MODE",checked:S,onChange:E,disabled:x}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("button",{onClick:()=>T(!V),disabled:x,className:"flex items-center text-green-500 font-mono text-sm hover:text-green-300 transition-colors disabled:opacity-50",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4 mr-1 transition-transform ".concat(V?"rotate-90":"")}),"Extra JSON params"]}),V&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)(c.xj,{label:"",value:O,onChange:C,disabled:x,placeholder:'{"key": "value"}',type:"textarea"}),A&&(0,r.jsx)("div",{className:"text-red-500 font-mono text-xs mt-1",children:A})]})]})]}),x&&(0,r.jsx)("div",{className:"mb-4 text-green-500 font-mono text-sm animate-pulse",children:"full"===h?"[ RUNNING FULL WORKFLOW... ]":"[ RUNNING VALIDATION... ]"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,r.jsx)(c.RD,{onClick:P,disabled:x,children:"[RUN FULL WORKFLOW]"}),(0,r.jsx)(c.RD,{onClick:D,disabled:x,variant:"secondary",children:"[RUN ONLY VALIDATION]"})]})]}),(0,r.jsxs)(c.jB,{children:[(0,r.jsx)(c.U,{level:2,className:"mb-4",children:"[ РЕЗУЛЬТАТЫ ВАЛИДАЦИИ ]"}),d?(0,r.jsxs)("div",{className:"space-y-6",children:[(null==U?void 0:U.reportValidation)&&(0,r.jsxs)("div",{className:"border border-green-500/50 p-4",children:[(0,r.jsx)("div",{className:"text-green-400 font-mono text-sm mb-3",children:"REPORT VALIDATION:"}),(0,r.jsxs)("div",{className:"font-mono text-sm mb-3",children:[(0,r.jsx)("span",{className:"text-green-500",children:"REPORT_VALID: "}),(0,r.jsx)("span",{className:U.reportValidation.isValid?"text-green-400":"text-red-500",children:U.reportValidation.isValid?"YES":"NO"})]}),U.reportValidation.errors.length>0&&(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("div",{className:"text-red-500 font-mono text-sm mb-1",children:"ERRORS:"}),U.reportValidation.errors.map((e,t)=>(0,r.jsxs)("div",{className:"text-red-500 font-mono text-sm",children:["[ERROR] (",e.code||"no-code",") ",e.message,e.details&&" - ".concat(e.details)]},t))]}),U.reportValidation.warnings.length>0&&(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("div",{className:"text-yellow-500 font-mono text-sm mb-1",children:"WARNINGS:"}),U.reportValidation.warnings.map((e,t)=>(0,r.jsxs)("div",{className:"text-yellow-500 font-mono text-sm",children:["[WARN] (",e.code||"no-code",") ",e.message,e.details&&" - ".concat(e.details)]},t))]}),U.reportValidation.partnerReadiness&&(0,r.jsxs)("div",{className:"mt-4 pt-3 border-t border-green-500/30",children:[(0,r.jsxs)("div",{className:"font-mono text-sm mb-2",children:[(0,r.jsx)("span",{className:"text-green-500",children:"PARTNER_READY: "}),(0,r.jsx)("span",{className:U.reportValidation.partnerReadiness.isPartnerReady?"text-green-400":"text-yellow-500",children:U.reportValidation.partnerReadiness.isPartnerReady?"YES":"NO"})]}),U.reportValidation.partnerReadiness.comments&&U.reportValidation.partnerReadiness.comments.length>0&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("div",{className:"text-green-500/70 font-mono text-sm mb-1",children:"COMMENTS:"}),U.reportValidation.partnerReadiness.comments.map((e,t)=>(0,r.jsxs)("div",{className:"font-mono text-sm text-green-500/80",children:["- ",e]},t))]})]})]}),(null==U?void 0:U.sprint)&&(0,r.jsxs)("div",{className:"border border-green-500/50 p-4",children:[(0,r.jsx)("div",{className:"text-green-400 font-mono text-sm mb-2",children:"SPRINT SUMMARY:"}),U.sprint.name&&(0,r.jsxs)("div",{className:"font-mono text-sm text-green-500",children:["SPRINT: ",U.sprint.name]}),(U.sprint.startDate||U.sprint.endDate)&&(0,r.jsxs)("div",{className:"font-mono text-sm text-green-500",children:["DATES: ",U.sprint.startDate||"?"," -"," ",U.sprint.endDate||"?"]})]}),(null==U?void 0:U.report)&&(0,r.jsxs)("div",{className:"border border-green-500/50 p-4",children:[(0,r.jsx)("div",{className:"text-green-400 font-mono text-sm mb-2",children:"REPORT SUMMARY:"}),(0,r.jsx)("div",{className:"font-mono text-xs text-green-500/80",children:U.report.overview?"Overview: ".concat(U.report.overview.substring(0,150),"..."):"[ No overview ]"})]}),(null==U?void 0:null===(e=U.notionPage)||void 0===e?void 0:e.url)&&(0,r.jsxs)("div",{className:"border border-green-500/50 p-4",children:[(0,r.jsx)("div",{className:"text-green-400 font-mono text-sm mb-2",children:"NOTION PAGE:"}),(0,r.jsx)("a",{href:U.notionPage.url,target:"_blank",rel:"noopener noreferrer",className:"font-mono text-sm text-green-300 hover:text-green-100 underline",children:U.notionPage.url})]}),!(null==U?void 0:U.reportValidation)&&(0,r.jsx)("div",{className:"font-mono text-sm text-gray-500",children:"[ No validation results ]"})]}):(0,r.jsx)("div",{className:"text-green-500 font-mono text-sm",children:"[ NO RESULTS YET ]"}),(0,r.jsxs)("div",{className:"mt-6 pt-4 border-t border-green-500/30",children:[(0,r.jsx)("button",{onClick:()=>v(!f),className:"text-green-500 font-mono text-sm hover:text-green-300 transition-colors",children:"[Toggle Raw JSON]"}),f&&d&&(0,r.jsx)("div",{className:"mt-4 border border-green-500/50 p-4 overflow-auto max-h-96",children:(0,r.jsx)("pre",{className:"font-mono text-xs text-green-500",children:JSON.stringify(d,null,2)})})]})]}),(null==U?void 0:null===(t=U.reportValidation)||void 0===t?void 0:t.isValid)&&(null==U?void 0:null===(a=U.reportValidation)||void 0===a?void 0:null===(n=a.partnerReadiness)||void 0===n?void 0:n.isPartnerReady)&&(0,r.jsxs)("div",{className:"mt-8 border border-green-500 bg-green-950/30 p-6 text-center",children:[(0,r.jsx)("div",{className:"text-green-400 font-mono text-lg mb-2",children:"✓ ОТЧЁТ ГОТОВ К ОТПРАВКЕ ПАРТНЁРУ"}),(0,r.jsx)("p",{className:"text-green-500 font-mono text-sm",children:"Все проверки пройдены. Отчёт можно отправлять."})]})]})})}},3613:function(e,t,n){"use strict";n.d(t,{tS:function(){return m},RD:function(){return o},fm:function(){return i},U:function(){return a},xj:function(){return l},jB:function(){return s}});var r=n(7573);function s(e){let{children:t,className:n=""}=e;return(0,r.jsx)("div",{className:"border border-green-500 p-6 bg-black shadow-[0_0_10px_rgba(0,255,0,0.3)] ".concat(n),children:t})}function a(e){let{children:t,level:n=2,className:s=""}=e,a="h".concat(n);return(0,r.jsx)(a,{className:"".concat("text-green-500 font-mono"," ").concat({1:"text-2xl md:text-3xl",2:"text-xl",3:"text-lg"}[n]," ").concat(s),children:t})}function o(e){let{children:t,onClick:n,disabled:s=!1,variant:a="primary",className:o="",type:l="button"}=e;return(0,r.jsx)("button",{type:l,onClick:n,disabled:s,className:"".concat("border border-green-500 px-4 py-3 font-mono transition-colors disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"text-green-500 hover:bg-green-500 hover:text-black",secondary:"text-green-500/70 hover:bg-green-500/20 hover:text-green-400"}[a]," ").concat(o),children:t})}function l(e){let{label:t,value:n,onChange:s,disabled:a=!1,placeholder:o="",type:l="text",className:i=""}=e,c="w-full bg-black border border-green-500 text-green-500 px-3 py-2 font-mono focus:outline-none focus:ring-1 focus:ring-green-500 disabled:opacity-50";return(0,r.jsxs)("div",{className:i,children:[(0,r.jsx)("label",{className:"block text-green-500 font-mono text-sm mb-1",children:t}),"textarea"===l?(0,r.jsx)("textarea",{value:n,onChange:e=>s(e.target.value),disabled:a,placeholder:o,className:"".concat(c," min-h-[100px] text-xs")}):(0,r.jsx)("input",{type:"text",value:n,onChange:e=>s(e.target.value),disabled:a,placeholder:o,className:c})]})}function i(e){let{label:t,checked:n,onChange:s,disabled:a=!1,className:o=""}=e,l="checkbox-".concat(t.toLowerCase().replace(/\s+/g,"-"));return(0,r.jsxs)("div",{className:"flex items-center space-x-2 ".concat(o),children:[(0,r.jsx)("input",{type:"checkbox",id:l,checked:n,onChange:e=>s(e.target.checked),disabled:a,className:"w-4 h-4 bg-black border border-green-500 text-green-500 focus:ring-1 focus:ring-green-500 disabled:opacity-50"}),(0,r.jsx)("label",{htmlFor:l,className:"text-green-500 font-mono text-sm",children:t})]})}var c=n(7653),d=n(9811);function m(){let[e,t]=(0,c.useState)("checking");return(0,c.useEffect)(()=>{let e=async()=>{let e=await (0,d.q)();t(e?"online":"offline")};e();let n=setInterval(e,5e3);return()=>clearInterval(n)},[]),(0,r.jsxs)("div",{className:"text-green-500 font-mono text-sm mb-2",children:["checking"===e&&"[BACKEND: CHECKING...]","online"===e&&"[BACKEND: ONLINE]","offline"===e&&(0,r.jsx)("span",{className:"text-red-500",children:"[BACKEND: OFFLINE]"})]})}},9811:function(e,t,n){"use strict";n.d(t,{j:function(){return o},q:function(){return a}});var r=n(4850);let s=r.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:4000";async function a(){try{let e=await fetch("".concat(s,"/api/workflow/ping"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)return!1;let t=await e.json();return"ok"===t.status}catch(e){return console.error("Ping failed:",e),!1}}async function o(e,t){let n=await fetch("".concat(s,"/api/workflow/run-step"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({step:e,params:t})});if(!n.ok){let e=await n.text();throw Error("API request failed: ".concat(n.status," ").concat(n.statusText).concat(e?" - "+e:""))}return n.json()}}},function(e){e.O(0,[833,293,858,744],function(){return e(e.s=9892)}),_N_E=e.O()}]);